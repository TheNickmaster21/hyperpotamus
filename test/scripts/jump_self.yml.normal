steps:
  - actions:
      - set:
          source:
            visited: 0
          mode: set
        path: $.steps.0.actions.0
    path: $.steps.0
  - actions:
      - if:
          compare:
            operator: <
            array:
              - <%! visited %>
              - 3
          path: $.steps.1.actions.0.if
        then:
          - set:
              source:
                visited: '<%! visited | plus,1 %>'
              mode: set
            path: $.steps.1.actions.0.then.0
          - goto: SELF
            path: $.steps.1.actions.0.then.1
        path: $.steps.1.actions.0
    path: $.steps.1
  - actions:
      - compare:
          operator: =
          array:
            - <%! visited %>
            - 3
        path: $.steps.2.actions.0
    path: $.steps.2
normalized: true
