steps:
  - actions:
      - request:
          url: 'http://localhost:3000/json'
          method: POST
          json:
            store:
              book:
                - category: reference
                  author: Nigel Rees
                  title: Sayings of the Century
                  price: 8.95
                - category: fiction
                  author: Evelyn Waugh
                  title: Sword of Honour
                  price: 12.99
                - category: fiction
                  author: Herman Melville
                  title: Moby Dick
                  isbn: 0-553-21311-3
                  price: 8.99
                - category: fiction
                  author: J. R. R. Tolkien
                  title: The Lord of the Rings
                  isbn: 0-395-19395-8
                  price: 22.99
              bicycle:
                color: red
                price: 19.95
        response:
          - json:
              category: '$.store.book[*].category'
              categories:
                - '$.store.book[*].category'
            path: $.steps.0.actions.0.response.0
          - compare:
              operator: =
              array:
                - <% category %>
                - reference
            path: $.steps.0.actions.0.response.1
          - compare:
              operator: =
              array:
                - <% categories | join %>
                - 'reference,fiction,fiction,fiction'
            path: $.steps.0.actions.0.response.2
        path: $.steps.0.actions.0
    path: $.steps.0
normalized: true
